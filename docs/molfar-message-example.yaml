##--------------------------------------------------------
##                                                       
##                 Project @molfar
##
##               Message Data Structure
##                      Example
##               
##--------------------------------------------------------


## WORKFLOW Source DB => scheduler 

source:
  id: b940bfda-d145-4385-9dc6-c347dcd0fbcf ## item UUID  from source collection
  
  metadata:
    
    scraper:
      type:
        id: b940bfda-d145-4385-9dc6-c347dcd0fbcf ## item UUID from scanany-scripts collection
        name: telegram ## unique item name from scanany-scripts collection
      ## parameters for scanany-script
      params:
        url: https://t.me/AK47pfl
    
    scheduler:
      interval: 200000 ## time interval (ms) between scraps
      activatedAt: 2022-08-18T12:04:51.474Z ## Last activate event. Date and Time in ISO-8601 format (all date and time in this format as default)
      deactivatedAt: 2022-08-18T12:04:51.474Z ## Last deactivate event.
    
    ## other source metadata such as name, description, tags, location, etc.   

## WORKFLOW scheduler => scraper

task:
  script: "this is scanany script of process source"
  params: ## from section source
    url: https://t.me/AK47pfl
  instance: b940bfda-d145-4385-9dc6-c347dcd0fbcf ## scheduler instance   
  generatedAt: 2022-08-18T12:04:51.474Z  
    
## WORKFLOW scraper => next ms in workflow

scraper:
  instance: b940bfda-d145-4385-9dc6-c347dcd0fbcf ## scraper instance   
  scrapedAt: 2022-08-18T12:04:51.474Z
  message:
    
    ## REQUIRED scraped message text
    text: "Газовые войны. Европа, похоже, хитрит: смягчила риторику в отношении российского газа, чтобы заполнить хранилища.\n\nНа графике видно, что Европа ускорила закачку газовых хранилищ: их заполненность наконец-то вернулась к средним за 10 лет значениям. Закупки (несмотря на рекордные цены) ведутся в два раза быстрее, чем это нужно по плану.\n\nЕще недавно Еврокомиссия считала оплату за газ в рублях неприемлемой. «Оплата в рублях и открытие счета в Газпромбанке станут нарушением санкций и не могут быть приняты»,   заявлял еврокомиссар по вопросам энергетики. \n\nСегодня риторика изменилась. 20 европейских покупателей завели счета в Газпромбанке. «Никто никогда ничего не говорил про то, что платежи в рублях нарушают санкции»,   заявил премьер-министр Италии.\n\nЕвропа может снова ужесточить риторику в отношении России после заполнения хранилищ. Газпром, в свою очередь, снижает поставки и замедляет процесс: транзит газа через Украину в Европу снизился почти вдвое.\n\nГазовые войны, похоже, продолжаются \n\n#GAZP \n@AK47pfl"
    
    ## REQUIRED published date
    publishedAt: 2022-08-18T12:04:51.474Z
    
    ## REQUIRED raw message data. may be html, xml, text, etc    
    raw:
      html: >
        <i class=\"emoji\" style=\"background-image:url('//telegram.org/img/emoji/40/F09F87AAF09F87BA.png')\">raw html</i>
    ## OPTIONAL message author metadata
    author:
      name: "@AK47pfl"
      title: "РынкиДеньгиВласть | РДВ"
      text: Raw html description
      description: >
        <i class=\"emoji\" style=\"background-image:url('//telegram.org/img/emoji/40/F09F949D.png')\"><b>Raw html description</b></i>
      image: "https://cdn4.telegram-cdn.org/file/K6ElYTboYxlNDAQtTFVbTtEJqoLvw7aOqe9hbedxboMDpAaS-V0T1a2qMt_iFXrmjhoz7vJQWGx10xfl9Z6c5h-0VB1J-HcgAqwpEk9_gHfrf73-58gGUy4kEe8TS8JGTypH4KMhCr5CnU2VmRSPwAHRT6SrIhs2WNXmCcYpmwNC88yixy27FR6GbTOSUqjWiqqzTWfAefZC0vas6bg5nYrCyONghQ-XcKN_7JZipwOm1s-cJFAOsd8JKvY9fRjE0oXTNEX_tNogD5viypXP1rlbZZyWL5ttUC_2nwfEWWpfjcQvtphxv27JXG-PAOfrieeU0aYd4C7hpC9GEeEttg.jpg"
 
    ## OPTIONAL array of image  
    images:
      - url: https://rg.ru/2017/11/01/perevodchik-google-soshel-s-uma-i-nasmeshil-rossiian.html
      - url: https://rg.ru/2017/11/01/perevodchik-google-soshel-s-uma-i-nasmeshil-rossiian.html
    
    ## OPTIONAL array of links in a message
    links:
      - url: https://rg.ru/2017/11/01/perevodchik-google-soshel-s-uma-i-nasmeshil-rossiian.html
      - url: https://rg.ru/2017/11/01/perevodchik-google-soshel-s-uma-i-nasmeshil-rossiian.html

      
## Other sections generated by microservices such as lang-detector, ner or sentiment analysis.

